Running from arcus-1.ics.uci.edu
2019-05-14 05:27:31.663301: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1405] Found device 0 with properties: 
name: GeForce GTX TITAN major: 3 minor: 5 memoryClockRate(GHz): 0.8755
pciBusID: 0000:84:00.0
totalMemory: 5.94GiB freeMemory: 5.87GiB
2019-05-14 05:27:31.663565: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1484] Adding visible gpu devices: 0
2019-05-14 05:27:36.718133: I tensorflow/core/common_runtime/gpu/gpu_device.cc:965] Device interconnect StreamExecutor with strength 1 edge matrix:
2019-05-14 05:27:36.718200: I tensorflow/core/common_runtime/gpu/gpu_device.cc:971]      0 
2019-05-14 05:27:36.718214: I tensorflow/core/common_runtime/gpu/gpu_device.cc:984] 0:   N 
2019-05-14 05:27:36.718601: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1097] Created TensorFlow device (/job:localhost/replica:0/task:0/device:GPU:0 with 5662 MB memory) -> physical GPU (device: 0, name: GeForce GTX TITAN, pci bus id: 0000:84:00.0, compute capability: 3.5)
{'alpha': 0.4315390596243821, 'dropout': 0.07156577250716384, 'lr': 0.004924187489448942, 'leaky_relu': 0.23222623558926953, 'batch_norm': 0, 'loss_type': 'mse', 'num_layers': 7, 'layer_0': 202, 'layer_1': 76, 'layer_2': 225, 'layer_3': 328, 'layer_4': 415, 'layer_5': 101, 'layer_6': 238, 'layer_7': 90, 'max_concurrent': 4, 'P': 'arcus_gpu.p', 'q': 'arcus.q', 'l': "hostname='(arcus-1|arcus-2|arcus-3|arcus-4|arcus-5|arcus-6|arcus-7|arcus-8|arcus-9|arcus-10)'", 'env': '/home/jott1/Projects/SHERPA_EX/.profile', 'data': 'fluxbypass_aqua', 'run_type': 'hyper_param_opt_conservation', 'batch_size': 2048, 'data_dir': '/baldig/chemistry/earth_system_science/', 'max_dense_layers': 8, 'epochs': 25, 'patience': 10, 'conservation': 1}
Epoch 1/25
 - 3932s - loss: 738614.4671 - mean_squared_error: 738614.4671 - val_loss: 338.3378 - val_mean_squared_error: 338.3378
Epoch 2/25
 - 3714s - loss: 280893599.9125 - mean_squared_error: 280893599.9125 - val_loss: 2477.9161 - val_mean_squared_error: 2477.9161
Epoch 3/25
 - 3612s - loss: 1603320846.1140 - mean_squared_error: 1603320846.1140 - val_loss: 31782752.3617 - val_mean_squared_error: 31782752.3617
Epoch 4/25
 - 4060s - loss: 17380972.1414 - mean_squared_error: 17380972.1414 - val_loss: 2780.8347 - val_mean_squared_error: 2780.8347
Epoch 5/25
 - 4390s - loss: 2139446909.3407 - mean_squared_error: 2139446909.3407 - val_loss: 1513319.4250 - val_mean_squared_error: 1513319.4250
Epoch 6/25
 - 5190s - loss: 2043431.0140 - mean_squared_error: 2043431.0140 - val_loss: 1301.2934 - val_mean_squared_error: 1301.2934
/pkg/python/3.6.1-centos7/lib/python3.6/site-packages/h5py/__init__.py:34: FutureWarning: Conversion of the second argument of issubdtype from `float` to `np.floating` is deprecated. In future, it will be treated as `np.float64 == np.dtype(float).type`.
  from ._conv import register_converters as _register_converters
Using TensorFlow backend.
Epoch 7/25
Traceback (most recent call last):
  File "main.py", line 76, in <module>
    net.train(train_gen, valid_gen, trial=trial, client=client)
  File "/home/jott1/Projects/CBRAIN-CAM/notebooks/tbeucler_devlog/hp_opt_conservation/model.py", line 135, in train
    # save to h5 file
  File "/home/jott1/.local/lib/python3.6/site-packages/tensorflow/python/keras/engine/training.py", line 1779, in fit_generator
    initial_epoch=initial_epoch)
  File "/home/jott1/.local/lib/python3.6/site-packages/tensorflow/python/keras/engine/training_generator.py", line 244, in fit_generator
    callbacks.on_epoch_end(epoch, epoch_logs)
  File "/home/jott1/.local/lib/python3.6/site-packages/tensorflow/python/keras/callbacks.py", line 96, in on_epoch_end
    callback.on_epoch_end(epoch, logs)
  File "/home/jott1/.local/lib/python3.6/site-packages/sherpa/database.py", line 226, in <lambda>
    context={n: logs[n] for n in context_names})
  File "/home/jott1/.local/lib/python3.6/site-packages/sherpa/database.py", line 209, in send_metrics
    self.db.results.insert_one(result)
  File "/home/jott1/.local/lib/python3.6/site-packages/pymongo/collection.py", line 700, in insert_one
    session=session),
  File "/home/jott1/.local/lib/python3.6/site-packages/pymongo/collection.py", line 614, in _insert
    bypass_doc_val, session)
  File "/home/jott1/.local/lib/python3.6/site-packages/pymongo/collection.py", line 602, in _insert_one
    acknowledged, _insert_command, session)
  File "/home/jott1/.local/lib/python3.6/site-packages/pymongo/mongo_client.py", line 1279, in _retryable_write
    with self._tmp_session(session) as s:
  File "/pkg/python/3.6.1-centos7/lib/python3.6/contextlib.py", line 82, in __enter__
    return next(self.gen)
  File "/home/jott1/.local/lib/python3.6/site-packages/pymongo/mongo_client.py", line 1611, in _tmp_session
    s = self._ensure_session(session)
  File "/home/jott1/.local/lib/python3.6/site-packages/pymongo/mongo_client.py", line 1598, in _ensure_session
    return self.__start_session(True, causal_consistency=False)
  File "/home/jott1/.local/lib/python3.6/site-packages/pymongo/mongo_client.py", line 1551, in __start_session
    server_session = self._get_server_session()
  File "/home/jott1/.local/lib/python3.6/site-packages/pymongo/mongo_client.py", line 1584, in _get_server_session
    return self._topology.get_server_session()
  File "/home/jott1/.local/lib/python3.6/site-packages/pymongo/topology.py", line 429, in get_server_session
    None)
  File "/home/jott1/.local/lib/python3.6/site-packages/pymongo/topology.py", line 200, in _select_servers_loop
    self._error_message(selector))
pymongo.errors.ServerSelectionTimeoutError: arcus-2.ics.uci.edu:27001: [Errno 111] Connection refused
